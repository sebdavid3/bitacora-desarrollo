# Bitácora - 29 de Agosto de 2025

## Objetivos del día
- [x] Resolver problema de importación de base de datos Oracle
- [x] Completar migración de BD desde VM Amazon a entorno local
- [x] Crear documentación técnica de la solución implementada
- [x] Preparar ambiente para deployment de VynamicGuardian

## Horario
**Inicio:** 14:00
**Fin:** 17:00
**Horas trabajadas:** 3 horas

## Actividades de Desarrollo
### Proyectos trabajados
- Migración de base de datos Oracle (esquema BIOMETRIA)
- Resolución de error ORA-39405 por incompatibilidad de versiones TZ
- Preparación de ambiente para VynamicGuardian y VynamicGuardianAdmin

### Código escrito/modificado
- Scripts SQL para creación de usuarios (CreateUser.sql)
- Scripts batch para automatización (CreateUser.bat, ImportDB.bat)
- Comandos de exportación e importación con utilidades legadas exp/imp

### Tecnologías utilizadas
- Oracle 19c Enterprise Edition
- Oracle Data Pump (expdp/impdp)
- Utilidades legadas Oracle (exp/imp)
- SQL*Plus
- Batch scripting

## Aprendizaje
### Nuevos conceptos
- Error ORA-39405: Incompatibilidad de versiones de Zona Horaria (TZ) en Oracle
- Diferencias entre Data Pump y utilidades legadas exp/imp
- Manejo de NLS_TZ_VERSION para compatibilidad entre versiones
- Migración de esquemas entre bases de datos con diferentes versiones TZ

### Recursos consultados
- Documentación Oracle sobre versiones de Zona Horaria
- Guías de troubleshooting para errores ORA-39405
- Manuales de utilidades exp/imp vs expdp/impdp
- Documentación de parámetros NLS_TZ_VERSION

### Documentación revisada
- Oracle Database Utilities Guide
- Error handling documentation para Data Pump
- Best practices para migración de esquemas

## Problemas y Soluciones
### Problemas encontrados
- **Error ORA-39405**: Incompatibilidad entre BD origen (TZ versión 35) y destino (TZ versión 32)
- Data Pump aplica compatibilidad estricta que impide importación
- Intentos con EXCLUDE de esquemas del sistema fallaron
- Sin acceso a My Oracle Support para descargar parche TZ 35

### Soluciones implementadas
- **Solución definitiva**: Cambio a utilidades legadas exp/imp
- Uso de `NLS_TZ_VERSION=32` en exportación para forzar compatibilidad
- Uso de `NLS_TZ_VERSION=35` en importación para manejar datos existentes
- Creación de scripts automatizados para el proceso completo

### Proceso exitoso implementado
1. Creación de usuario BIOMETRIA en BD destino
2. Exportación con: `exp BIOMETRIA/BIOMETRIA@orcl file=biometria.dmp owner=BIOMETRIA`
3. Importación con: `imp BIOMETRIA/BIOMETRIA@orcl file=biometria.dmp fromuser=BIOMETRIA touser=BIOMETRIA`
4. Verificación exitosa: 45,050 filas THG_TRANSACCION, 499 filas VCS_IMAGE

## Interacciones del equipo
### Reuniones
- No aplica (trabajo técnico individual)

### Consultas realizadas
- Investigación independiente sobre errores Oracle
- Revisión de documentación técnica

### Feedback recibido
- Preparación para presentar solución al Sr. Víctor el lunes

## Tareas Administrativas
- Creación de documentación técnica completa
- Organización de scripts y logs del proceso
- Preparación de evidencias de migración exitosa

## Ideas y Notas
- Las utilidades legadas exp/imp son menos estrictas que Data Pump para versiones TZ
- Importante documentar soluciones técnicas para referencia futura
- El ambiente está listo para deployment de aplicaciones en WebLogic

## Logros del día
- **Resolución completa del problema ORA-39405**
- Migración exitosa del esquema BIOMETRIA (45,549 filas totales)
- Creación de documentación técnica detallada con solución paso a paso
- Scripts automatizados para replicar el proceso
- Ambiente de desarrollo completamente preparado para VynamicGuardian

## Problemas y Soluciones - Resumen Técnico
### Problema Principal
Error ORA-39405 por desajuste de versiones de Zona Horaria entre BD origen (TZ 35) y destino (TZ 32). Data Pump no permite importación directa debido a compatibilidad estricta.

### Intentos Fallidos
- Forzar TZ 32 en exportación con Data Pump
- Exclusión de esquemas del sistema
- Exportación específica de esquema con expdp/impdp

### Solución Final
Uso de utilidades legadas `exp`/`imp` que no aplican verificaciones TZ estrictas:
- Export: `set NLS_TZ_VERSION=32; exp...`
- Import: `set NLS_TZ_VERSION=35; imp...`

## Preguntas/Dudas pendientes
- ¿Configuraciones específicas necesarias para VynamicGuardian en WebLogic?
- ¿Procedimientos de testing para validar funcionalidad completa?

## Para el lunes
- [ ] Subir VynamicGuardian a WebLogic
- [ ] Subir VynamicGuardianAdmin a WebLogic
- [ ] Realizar pruebas de funcionamiento de ambas aplicaciones
- [ ] Validar conectividad con base de datos migrada
- [ ] Documentar proceso de deployment

---
**Estado de productividad:** Alto
**Comentarios adicionales:** Día extremadamente productivo con resolución completa del bloqueador principal. La creación de documentación técnica detallada asegura que el conocimiento quede disponible para futuros proyectos similares. El ambiente está completamente preparado para el deployment de las aplicaciones VynamicGuardian el lunes, lo que representa un hito importante en el proyecto.
